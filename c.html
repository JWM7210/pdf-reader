<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Full PDF Reader</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.14.305/pdf.min.js"></script>
<style>
body { font-family: Arial; text-align:center; margin:20px; background:#f2f2f2; transition:0.3s;}
canvas { border:1px solid #ccc; margin-top:10px; max-width:95%; background:white; transition:0.3s;}
#controls { margin-top:15px;}
button { padding:7px 14px; margin:3px; border:none; background:#333; color:white; border-radius:6px; cursor:pointer;}
button:hover{ background:#555;}
.dark { background:#1c1c1c; color:white; }
.dark canvas { filter: invert(1) hue-rotate(180deg);}
</style>
</head>
<body>
<h2>Full PDF Reader</h2>

<input type="file" id="file-input" accept="application/pdf"><br>
<canvas id="pdf-canvas"></canvas>

<div id="controls" style="display:none;">
    <br>
    <button id="prev">Prev</button>
    <span id="page-num">1</span> / <span id="page-count">?</span>
    <button id="next">Next</button>
    <br><br>
    <button id="zoom-in">Zoom +</button>
    <button id="zoom-out">Zoom âˆ’</button>
    <button id="zoom-reset">Reset Zoom</button>
    <br><br>
    <button id="dark-mode">Toggle Dark Mode</button>
</div>

<script>
const url = "pdfs/CShorter.pdf";

pdfjsLib.getDocument(url).promise.then(pdf => {
    pdfDoc = pdf;

    const savedPage = localStorage.getItem("savedPage");
    pageNum = savedPage ? parseInt(savedPage) : 1;

    document.getElementById("page-count").textContent = pdf.numPages;
    controls.style.display = "block";
    renderPage(pageNum);
});

function queueRenderPage(num) {
    if (pageIsRendering) {
        pageNumIsPending = num;
    } else {
        renderPage(num);
    }
    localStorage.setItem("savedPage", num);
}

let pdfDoc = null, pageNum = 1, canvas = document.getElementById("pdf-canvas"),
    ctx = canvas.getContext("2d"), scale = 1.3, pageIsRendering = false,
    pageNumIsPending = null, controls = document.getElementById("controls"),
    currentFileKey = "";

// Render page
function renderPage(num){
    pageIsRendering = true;
    pdfDoc.getPage(num).then(page => {
        const viewport = page.getViewport({scale});
        canvas.height = viewport.height;
        canvas.width = viewport.width;
        page.render({canvasContext: ctx, viewport}).promise.then(() => {
            pageIsRendering = false;
            if(pageNumIsPending !== null){renderPage(pageNumIsPending); pageNumIsPending = null;}
        });
        document.getElementById("page-num").textContent = num;
        if(currentFileKey) localStorage.setItem(currentFileKey, num);
    });
}

function queueRenderPa
